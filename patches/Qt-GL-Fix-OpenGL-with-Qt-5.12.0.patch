From bb5cf3b4ca40a16165c9f301ea4d681c407707e7 Mon Sep 17 00:00:00 2001
From: eumagga0x2a <eumagga0x2a@users.noreply.github.com>
Date: Sat, 15 Dec 2018 18:31:56 +0100
Subject: [PATCH] [Qt/GL] Fix OpenGL with Qt 5.12.0

---
 avidemux/qt4/ADM_userInterfaces/ADM_gui/Q_gui2GL.cpp | 2 ++
 1 file changed, 2 insertions(+)

diff --git a/avidemux/qt4/ADM_userInterfaces/ADM_gui/Q_gui2GL.cpp b/avidemux/qt4/ADM_userInterfaces/ADM_gui/Q_gui2GL.cpp
index 90c4c9385..592cb6532 100644
--- a/avidemux/qt4/ADM_userInterfaces/ADM_gui/Q_gui2GL.cpp
+++ b/avidemux/qt4/ADM_userInterfaces/ADM_gui/Q_gui2GL.cpp
@@ -74,6 +74,8 @@ void UI_Qt4InitGl(void)
     }else
         ADM_warning("OpenGL: Not enough ARB extension found\n");
 
+    topGlWidgetRoot->context()->makeCurrent();
+
 	printf("[GL Render] OpenGL Vendor: %s\n", glGetString(GL_VENDOR));
 	printf("[GL Render] OpenGL Renderer: %s\n", glGetString(GL_RENDERER));
 	printf("[GL Render] OpenGL Version: %s\n", glGetString(GL_VERSION));
-- 
2.19.1

